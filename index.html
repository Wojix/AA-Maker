<!DOCTYPE html><html lang="ja"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><title>AA Maker</title><style>body{margin:0;padding:20px;background:#f0f0f0;font-family:monospace;text-align:center;user-select:none}#draw{border:2px solid #444;background:#fff;cursor:crosshair;margin:0 auto;display:block;touch-action:none}#tools{margin:20px 0;display:flex;justify-content:center;gap:10px;flex-wrap:wrap}label{font-size:14px}input{width:60px;text-align:center;font-size:16px}button{padding:7px 14px;border-radius:6px;border:1px solid #666;background:#fff;cursor:pointer}button:hover{background:#e5e5e5}#output{width:90%;height:200px;margin-top:20px}</style></head><body><h1>AA Maker</h1><canvas id="draw" width="400" height="400"></canvas><div id="tools"><label>線の文字:</label><input id="fgChar" maxlength="1" value="#"/><label>背景の文字:</label><input id="bgChar" maxlength="1" value=" "/><label>横文字数:</label><input id="aaWidth" type="number" min="10" max="200" value="80"/><label>縦文字数:</label><input id="aaHeight" type="number" min="10" max="200" value="40"/><button onclick="exportAA()">AAに変換</button><button onclick="downloadTxt()">txtでDL</button><button onclick="clearCanvas()">全消し</button></div><textarea id="output" placeholder="ここにAAが出る"></textarea><script>const canvas=document.getElementById("draw"),ctx=canvas.getContext("2d");let drawing=!1;ctx.lineWidth=2;ctx.lineCap="round";ctx.strokeStyle="#000";function getPos(e){if(e.touches){const t=canvas.getBoundingClientRect();return{x:e.touches[0].clientX-t.left,y:e.touches[0].clientY-t.top}}return{x:e.offsetX,y:e.offsetY}}canvas.addEventListener("mousedown",e=>{drawing=!0;const t=getPos(e);ctx.beginPath();ctx.moveTo(t.x,t.y)});canvas.addEventListener("mousemove",e=>{if(!drawing)return;const t=getPos(e);ctx.lineTo(t.x,t.y);ctx.stroke()});document.addEventListener("mouseup",()=>drawing=!1);canvas.addEventListener("touchstart",e=>{e.preventDefault();drawing=!0;const t=getPos(e);ctx.beginPath();ctx.moveTo(t.x,t.y)});canvas.addEventListener("touchmove",e=>{e.preventDefault();if(!drawing)return;const t=getPos(e);ctx.lineTo(t.x,t.y);ctx.stroke()});canvas.addEventListener("touchend",()=>drawing=!1);function exportAA(){const e=document.getElementById("fgChar").value||"#",t=document.getElementById("bgChar").value||" ",a=parseInt(document.getElementById("aaWidth").value),n=parseInt(document.getElementById("aaHeight").value),o=canvas.width/a,r=canvas.height/n;let l="";for(let i=0;i<n;i++){let c="";for(let d=0;d<a;d++){const u=ctx.getImageData(d*o,i*r,o,r);let s=0;for(let f=0;f<u.data.length;f+=4)u.data[f+3]>0&&s++;c+=s>5?e:t}l+=c+"\n"}output.value=l}function downloadTxt(){const e=output.value,t=new Blob([e],{type:"text/plain"}),a=URL.createObjectURL(t),n=document.createElement("a");n.href=a,n.download="aa.txt",n.click(),URL.revokeObjectURL(a)}function clearCanvas(){ctx.clearRect(0,0,canvas.width,canvas.height)}</script></body></html>
